!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.HumanView=t():"undefined"!=typeof global?global.HumanView=t():"undefined"!=typeof self&&(self.HumanView=t())}(function(){var t;return function e(t,n,r){function i(u,s){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}var l=n[u]={exports:{}};t[u][0].call(l.exports,function(e){var n=t[u][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,e){function n(t){this.cid=u.uniqueId("view"),t||(t={}),u.extend(this,u.pick(t,l)),this.initialize.apply(this,arguments),this.autoRender&&this.template&&this.renderAndBind({model:this.model,collection:this.collection},this.template),this.el&&this.setElement(this.el)}var r=(t("statey"),t("backbone-extend-standalone")),i=t("backbone-events-standalone"),o=t("domify"),u=t("underscore"),s=t("component-events"),a=/^(\S+)\s*(.*)$/,l=["model","collection","el","events","autoRender"];u.extend(n.prototype,i,{$:function(t){return this.$el.find(t)},getAll:function(t){return this.el.querySelectorAll(t)},get:function(t){return this.el.querySelector(t)},initialize:function(){},render:function(){return this},remove:function(){return this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),u.chain(this._subviews).flatten().invoke("remove"),this.stopListening(),this},setElement:function(t,e){return this.events&&this.events.unbind(),this.el=t,this.events=s(this.el,this),e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=u.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e],r=e.match(a),i=r[1],o=r[2];i+=".delegateEvents"+this.cid,""===o?this.events.bind(i,n):this.events.bind(i,o,n)}return this},undelegateEvents:function(){return this.events.unbind(),this},registerSubview:function(t){return this._subviews||(this._subviews=[]),this._subviews.push(t),t.el&&(t.parent=this),t},renderSubview:function(t,e){return"string"==typeof e&&(e=this.get(e)),this.registerSubview(t),t.render(),e.appendChild(t.el),t},registerBindings:function(t,e){var n=this,r={textBindings:"text",htmlBindings:"html",srcBindings:"src",hrefBindings:"href",attributeBindings:"",inputBindings:"val"},i=t||this.model,o=e||this;if(!i)throw new Error("Cannot register bindings without a model");return u.each(r,function(t,e){u.each(o[e],function(r,o){var u,s=function(){var n;return"attributeBindings"===e?(n=r[1],r=r[0],n):"href"===t||"src"===t?t:void 0}();u=function(){var e=r.length>0?n.$(r):$(n.el);s?e.attr(s,i.get(o)):e[t](i.get(o))},n.listenTo(i,"change:"+o,u),u()})}),u.each(o.classBindings,function(t,e){var r=function(){var r=i.get(e),o=i.previous(e),s=t.length>0?n.$(t):$(n.el);u.isBoolean(r)?r?s.addClass(e):s.removeClass(e):(o&&s.removeClass(o),s.addClass(r))};n.listenTo(i,"change:"+e,r),r()}),this},renderAndBind:function(t,e){return this.renderWithTemplate(t,e),this.model&&this.registerBindings(),this},getByRole:function(t){return this.el.querySelector('[role="'+t+'"]')||this.el.getAttribute("role")===t&&this.el||void 0},renderWithTemplate:function(t,e){var n=e||this.template;if(!n)throw new Error("Template string or function needed.");var r=o(u.isString(n)?n:n(t||{model:this.model})),i=this.el&&this.el.parentNode;if(i&&i.replaceChild(r,this.el),r[1])throw new Error("Views can only have one root element.");this.setElement(r,!this.renderedByParentView)},cacheElements:function(t){for(var e in t)this[e]=this.get(t[e])},listenToAndRun:function(t,e,n){var r=u.bind(n,this);this.listenTo(t,e,r),r()},animateRemove:function(){this.remove()},renderCollection:function(t,e,n,r){function i(t){return u.find(l,function(e){return t===e.model})}function o(t,r){var o,s=c.filter?c.filter(t):!0;s&&(o=i(t),o||(o=new e(u({model:t,collection:r}).extend(c.viewOptions)),l.push(o),o.parent=a,o.renderedByParentView=!0,o.render({containerEl:n})),o.insertSelf||(c.reverse?n.insertBefore(o.el,n.firstChild):n.appendChild(o.el)),o.delegateEvents())}function s(){n.innerHTML="",t.each(o)}var a=this,l=[],c=u.defaults(r||{},{filter:null,viewOptions:{},reverse:!1});n="string"==typeof n?this.get(n):n,this.registerSubview(l),this.listenTo(t,"add",o),this.listenTo(t,"remove",function(t){var e=l.indexOf(i(t));-1!==e&&l.splice(e,1)[0].animateRemove()}),this.listenTo(t,"move sort",s),this.listenTo(t,"refresh reset",function(){for(;l.length;)l.pop().remove();s()}),s()}}),n.extend=r,e.exports=n},{"backbone-events-standalone":3,"backbone-extend-standalone":4,"component-events":6,domify:11,statey:12,underscore:13}],2:[function(e,n,r){!function(){function e(){return{keys:Object.keys,uniqueId:function(t){var e=++c+"";return t?t+e:e},has:function(t,e){return a.call(t,e)},each:function(t,e,n){if(null!=t)if(s&&t.forEach===s)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(e.call(n,t[r],r,t)===u)return}else for(var o in t)if(this.has(t,o)&&e.call(n,t[o],o,t)===u)return},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,o=this,u={},s=Array.prototype.forEach,a=Object.prototype.hasOwnProperty,l=Array.prototype.slice,c=0,f=e();i={on:function(t,e,n){if(!p(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!p(this,"once",t,[e,n])||!e)return this;var r=this,i=f.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,u,s,a,l,c;if(!this._events||!p(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(u=t?[t]:f.keys(this._events),s=0,a=u.length;a>s;s++)if(t=u[s],o=this._events[t]){if(this._events[t]=r=[],e||n)for(l=0,c=o.length;c>l;l++)i=o[l],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=l.call(arguments,1);if(!p(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&d(n,e),r&&d(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}};var h=/\s+/,p=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(h.test(n)){for(var o=n.split(h),u=0,s=o.length;s>u;u++)t[e].apply(t,[o[u]].concat(r));return!1}return!0},d=function(t,e){var n,r=-1,i=t.length,o=e[0],u=e[1],s=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,u);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,u,s);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},v={listenTo:"on",listenToOnce:"once"};f.each(v,function(t,e){i[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=f.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return f.each(e,function(e){t[e]=this[e]},this),t},"function"==typeof t?t(function(){return i}):"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=i),r.BackboneEvents=i):o.BackboneEvents=i}(this)},{}],3:[function(t,e){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":2}],4:[function(e,n,r){!function(e){"object"==typeof r?n.exports=e():"function"==typeof t&&t.amd?t(e):window.BackboneExtend=e()}(function(){"use strict";var t={has:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},extend:function(t){for(var e=1;e<arguments.length;++e){var n=arguments[e];if(n)for(var r in n)t[r]=n[r]}return t}},e=function(e,n){var r,i=this;r=e&&t.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(r,i,n);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&t.extend(r.prototype,e),r.__super__=i.prototype,r};return e})},{}],5:[function(t,e,n){var r=t("./node_modules/component-delegate/node_modules/discore-closest"),i=t("component-event");n.bind=function(t,e,n,o,u){return i.bind(t,n,function(n){var i=n.target||n.srcElement;n.delegateTarget=r(i,e,!0,t),n.delegateTarget&&o.call(t,n)},u)},n.unbind=function(t,e,n,r){i.unbind(t,e,n,r)}},{"./node_modules/component-delegate/node_modules/discore-closest":7,"component-event":10}],6:[function(t,e){function n(t,e){if(!(this instanceof n))return new n(t,e);if(!t)throw new Error("element required");if(!e)throw new Error("object required");this.el=t,this.obj=e,this._events={}}function r(t){var e=t.split(/ +/);return{name:e.shift(),selector:e.join(" ")}}var i=t("component-event"),o=t("./delegate");e.exports=n,n.prototype.sub=function(t,e,n){this._events[t]=this._events[t]||{},this._events[t][e]=n},n.prototype.bind=function(t,e){function n(){var t=[].slice.call(arguments).concat(c);a[e].apply(a,t)}var u=r(t),s=this.el,a=this.obj,l=u.name,e=e||"on"+l,c=[].slice.call(arguments,2);return u.selector?n=o.bind(s,u.selector,l,n):i.bind(s,l,n),this.sub(l,e,n),n},n.prototype.unbind=function(t,e){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(t);var n=this._events[t];if(n){var r=n[e];r&&i.unbind(this.el,t,r)}},n.prototype.unbindAll=function(){for(var t in this._events)this.unbindAllOf(t)},n.prototype.unbindAllOf=function(t){var e=this._events[t];if(e)for(var n in e)this.unbind(t,n)}},{"./delegate":5,"component-event":10}],7:[function(t,e){var n=t("./node_modules/component-matches-selector");e.exports=function(t,e,r,i){for(t=r?{parentNode:t}:t,i=i||document;(t=t.parentNode)&&t!==document;){if(n(t,e))return t;if(t===i)return}}},{"./node_modules/component-matches-selector":8}],8:[function(t,e){function n(t,e){if(o)return o.call(t,e);for(var n=r.all(e,t.parentNode),i=0;i<n.length;++i)if(n[i]==t)return!0;return!1}var r=t("./node_modules/component-query"),i=Element.prototype,o=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=n},{"./node_modules/component-query":9}],9:[function(t,e,n){function r(t,e){return e.querySelector(t)}n=e.exports=function(t,e){return e=e||document,r(t,e)},n.all=function(t,e){return e=e||document,e.querySelectorAll(t)},n.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return r=t.one,n.all=t.all,n}},{}],10:[function(t,e,n){var r=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",o="addEventListener"!==r?"on":"";n.bind=function(t,e,n,i){return t[r](o+e,n,i||!1),n},n.unbind=function(t,e,n,r){return t[i](o+e,n,r||!1),n}},{}],11:[function(t,e){function n(t){if("string"!=typeof t)throw new TypeError("String expected");var e=/<([\w:]+)/.exec(t);if(!e)return document.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var n=e[1];if("body"==n){var i=document.createElement("html");return i.innerHTML=t,i.removeChild(i.lastChild)}var o=r[n]||r._default,u=o[0],s=o[1],a=o[2],i=document.createElement("div");for(i.innerHTML=s+t+a;u--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var l=document.createDocumentFragment();i.firstChild;)l.appendChild(i.removeChild(i.firstChild));return l}e.exports=n;var r={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};r.td=r.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],r.option=r.optgroup=[1,'<select multiple="multiple">',"</select>"],r.thead=r.tbody=r.colgroup=r.caption=r.tfoot=[1,"<table>","</table>"],r.text=r.circle=r.ellipse=r.line=r.path=r.polygon=r.polyline=r.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],12:[function(t,e){function n(t,e){t||(t={}),e||(e={}),this.cid=r.uniqueId("model"),this.collection=e.collection,this.registry=e.registry,e.parse&&(t=this.parse(t,e)||{}),e._attrs=t,this._namespace=e.namespace,this._initted=!1,this._values={},this._initCollections(),this._cache={},this._previousAttributes={},this._events={},this.set(t,r.extend({silent:!0,initial:!0},e)),this._changed={},this.initialize.apply(this,arguments),t[this.idAttribute]&&this.registry&&this.registry.store(this),this._initted=!0,this.seal&&Object.seal(this)}var r=t("underscore"),i=t("backbone-events-standalone"),o={attributes:{get:function(){return this._getAttributes(!0)}},derived:{get:function(){var t={};for(var e in this._derived)t[e]=this._derived[e].fn.apply(this);return t}}},u={idAttribute:"id",extraProperties:"ignore",getId:function(){return this.get(this.idAttribute)},initialize:function(){return this},parse:function(t){return t},serialize:function(){return this._getAttributes(!1,!0)},set:function(t,e,n){function i(t){x.push(t),r.each(m._deps[t]||[],function(t){i(t)})}var o,u,a,l,c,f,h,p,d,v,g,y,m=this,b=this.extraProperties;if(r.isObject(t)||null===t?(p=t,n=e):(p={},p[t]=e),n=n||{},!this._validate(p,n))return!1;v=n.unset,d=n.silent,y=n.initial,a=[],o=this._changing,this._changing=!0,o||(this._previousAttributes=this._getAttributes(!0),this._changed={}),u=this._previousAttributes;for(h in p){if(c=p[h],l=typeof c,g=this._values[h],f=this._definition[h],!f){if("ignore"===b)continue;if("reject"===b)throw new TypeError('No "'+h+'" property defined on '+(this.type||"this")+" model and allowOtherProperties not set.");"allow"===b&&(f=this._createPropertyDefinition(h,"any"))}if(s[f.type]){var _=s[f.type].set(c);c=_.val,l=_.type}if(f.test){var w=f.test(c,l);if(w)throw new TypeError("Property '"+h+"' failed validation with error: "+w)}if(r.isUndefined(c)&&f.required)throw new TypeError("Required property '"+h+"' must be of type "+f.type+". Tried to set "+c);if(r.isNull(c)&&f.required&&!f.allowNull)throw new TypeError("Property '"+h+"' must be of type "+f.type+" (cannot be null). Tried to set "+c);if(f.type&&"any"!==f.type&&f.type!==l&&!r.isNull(c)&&!r.isUndefined(c))throw new TypeError("Property '"+h+"' must be of type "+f.type+". Tried to set "+c);if(f.values&&!r.contains(f.values,c))throw new TypeError("Property '"+h+"' must be one of values: "+f.values.map(function(t){return t.toString()}).join(", "));if(f.setOnce&&void 0!==g&&!r.isEqual(g,c))throw new TypeError("Property '"+t+"' can only be set once.");r.isEqual(g,c)||a.push({prev:g,val:c,key:h}),r.isEqual(u[h],c)?delete m._changed[h]:m._changed[h]=c}r.each(a,function(t){m._previousAttributes[t.key]=t.prev,v?delete m._values[t.key]:m._values[t.key]=t.val});var x=[];if(!d&&a.length&&(m._pending=!0),r.each(a,function(t){i(t.key)}),r.each(r.uniq(x),function(t){var e=m._derived[t];if(e&&e.cache&&!y){var n=m._cache[t],i=m._getDerivedProperty(t,!0);r.isEqual(n,i)||(m._previousAttributes[t]=n,d||m.trigger("change:"+t,m,i))}else d||m.trigger("change:"+t,m,m[t])}),o)return this;if(!d)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},get:function(t){return this[t]},toggle:function(t){var e=this._definition[t];if("boolean"===e.type)this[t]=!this[t];else{if(!e||!e.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[t]=a(e.values,this[t])}return this},previousAttributes:function(){return r.clone(this._previousAttributes)},hasChanged:function(t){return null==t?!r.isEmpty(this._changed):r.has(this._changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?r.clone(this._changed):!1;var e,n=!1,i=this._changing?this._previousAttributes:this._getAttributes(!0);for(var o in t)r.isEqual(i[o],e=t[o])||((n||(n={}))[o]=e);return n},toJSON:function(){return this.serialize()},has:function(t){return null!=this.get(t)},clone:function(){return new this.constructor(this._getAttributes(!0))},unset:function(t,e){var n,i=this._definition[t],o=i.type;return i.required?(n=r.isUndefined(i.default)?this._getDefaultForType(o):i.default,this.set(t,n,e)):this.set(t,n,r.extend({},e,{unset:!0}))},clear:function(t){var e=this;return r.each(this._getAttributes(!0),function(n,r){e.unset(r,t)}),this},previous:function(t){return null!=t&&Object.keys(this._previousAttributes).length?this._previousAttributes[t]:null},_getDefaultForType:function(t){return"string"===t?"":"object"===t?{}:"array"===t?[]:void 0},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=r.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,r.extend(e||{},{validationError:n})),!1):!0},_createPropertyDefinition:function(t,e,n){var i,o=this,u=this._definition[t]={};return r.isString(e)?(i=this._ensureValidType(e),i&&(u.type=i)):(i=this._ensureValidType(e[0]||e.type),i&&(u.type=i),(e[1]||e.required)&&(u.required=!0),u.default=r.isUndefined(e[2])?e.default:e[2],u.allowNull=e.allowNull?e.allowNull:!1,e.setOnce&&(u.setOnce=!0),u.required&&r.isUndefined(u.default)&&(u.default=this._getDefaultForType(i)),u.test=e.test,u.values=e.values),n&&(u.session=!0),Object.defineProperty(o,t,{set:function(e){this.set(t,e)},get:function(){var e=this._values[t];return"undefined"!=typeof e?(s[u.type]&&s[u.type].get&&(e=s[u.type].get(e)),e):u.default}}),u},_ensureValidType:function(t){return r.contains(["string","number","boolean","array","object","date","any"].concat(r.keys(s)),t)?t:void 0},_getAttributes:function(t,e){var n,r,i,o={};for(r in this._definition)i=this._definition[r],(!i.session||t&&i.session)&&(n=e?this._values[r]:this[r],"undefined"==typeof n&&(n=i.default),"undefined"!=typeof n&&(o[r]=n));return o},_getDerivedProperty:function(t,e){return this._derived[t].cache?!e&&this._cache.hasOwnProperty(t)?this._cache[t]:this._cache[t]=this._derived[t].fn.apply(this):this._derived[t].fn.apply(this)},_initCollections:function(){var t;if(this._collections)for(t in this._collections)this[t]=new this._collections[t],this[t].parent=this}};r.each(["keys","values","pairs","invert","pick","omit"],function(t){u[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this.attributes),r[t].apply(r,e)}}),i.mixin(u);var s={date:{set:function(t){var e;if(r.isDate(t))e="date",t=t.valueOf();else try{t=new Date(parseInt(t,10)).valueOf(),e="date"}catch(n){e=typeof t}return{val:t,type:e}},get:function(t){return new Date(t)}},array:{set:function(t){return{val:t,type:r.isArray(t)?"array":typeof t}}},object:{set:function(t){var e=typeof t;return"object"!==e&&r.isUndefined(t)&&(t=null,e="object"),{val:t,type:e}}}},a=function(t,e){var n=t.length,r=t.indexOf(e)+1;return r>n-1&&(r=0),t[r]},l=function(t,e,n){var i=t._derived[e]={fn:r.isFunction(n)?n:n.fn,cache:n.cache!==!1,depList:n.deps||[]};r.each(i.depList,function(n){t._deps[n]=r(t._deps[n]||[]).union([e])}),Object.defineProperty(t,e,{get:function(){return this._getDerivedProperty(e)},set:function(){throw new TypeError('"'+e+"\" is a derived property, it can't be set directly.")}})},c=function(t){function e(){h.apply(this,arguments)}var i,s,a,f,h=this._super||n;return Object.defineProperties(e.prototype,o),r.extend(e.prototype,u,{_derived:{},_deps:{},_definition:{}}),r.each(h.prototype,function(t,n){t instanceof Function&&(e.prototype[n]=t)}),this._spec&&(i=this._spec.props,s=this._spec.session,a=this._spec.derived,f=this._spec.collections),e._spec={props:r.extend({},i,t.props),session:r.extend({},s,t.session),derived:r.extend({},a,t.derived),collections:r.extend({},f,t.collections)},delete t.props,delete t.session,delete t.derived,delete t.collections,r.extend(e._spec,t),r.each(e._spec,function(t,n){"props"===n||"session"===n?r.each(t,function(t,r){e.prototype._createPropertyDefinition.call(e.prototype,r,t,"session"===n)}):"derived"===n?r.each(t,function(t,n){l(e.prototype,n,t)}):"collections"===n?e.prototype._collections=t:e.prototype[n]=t}),e._super=e,e.extend=c,e};n.dataTypes=s,n.extend=c,e.exports=n},{"backbone-events-standalone":3,underscore:13}],13:[function(e,n,r){(function(){var e=this,i=e._,o={},u=Array.prototype,s=Object.prototype,a=Function.prototype,l=u.push,c=u.slice,f=u.concat,h=s.toString,p=s.hasOwnProperty,d=u.forEach,v=u.map,g=u.reduce,y=u.reduceRight,m=u.filter,b=u.every,_=u.some,w=u.indexOf,x=u.lastIndexOf,E=Array.isArray,A=Object.keys,k=a.bind,j=function(t){return t instanceof j?t:this instanceof j?void(this._wrapped=t):new j(t)};"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=j),r._=j):e._=j,j.VERSION="1.6.0";var T=j.each=j.forEach=function(t,e,n){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(e.call(n,t[r],r,t)===o)return}else for(var u=j.keys(t),r=0,i=u.length;i>r;r++)if(e.call(n,t[u[r]],u[r],t)===o)return;return t};j.map=j.collect=function(t,e,n){var r=[];return null==t?r:v&&t.map===v?t.map(e,n):(T(t,function(t,i,o){r.push(e.call(n,t,i,o))}),r)};var O="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return r&&(e=j.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(T(t,function(t,o,u){i?n=e.call(r,n,t,o,u):(n=t,i=!0)}),!i)throw new TypeError(O);return n},j.reduceRight=j.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),y&&t.reduceRight===y)return r&&(e=j.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var u=j.keys(t);o=u.length}if(T(t,function(s,a,l){a=u?u[--o]:--o,i?n=e.call(r,n,t[a],a,l):(n=t[a],i=!0)}),!i)throw new TypeError(O);return n},j.find=j.detect=function(t,e,n){var r;return q(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},j.filter=j.select=function(t,e,n){var r=[];return null==t?r:m&&t.filter===m?t.filter(e,n):(T(t,function(t,i,o){e.call(n,t,i,o)&&r.push(t)}),r)},j.reject=function(t,e,n){return j.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},j.every=j.all=function(t,e,n){e||(e=j.identity);var r=!0;return null==t?r:b&&t.every===b?t.every(e,n):(T(t,function(t,i,u){return(r=r&&e.call(n,t,i,u))?void 0:o}),!!r)};var q=j.some=j.any=function(t,e,n){e||(e=j.identity);var r=!1;return null==t?r:_&&t.some===_?t.some(e,n):(T(t,function(t,i,u){return r||(r=e.call(n,t,i,u))?o:void 0}),!!r)};j.contains=j.include=function(t,e){return null==t?!1:w&&t.indexOf===w?-1!=t.indexOf(e):q(t,function(t){return t===e})},j.invoke=function(t,e){var n=c.call(arguments,2),r=j.isFunction(e);return j.map(t,function(t){return(r?e:t[e]).apply(t,n)})},j.pluck=function(t,e){return j.map(t,j.property(e))},j.where=function(t,e){return j.filter(t,j.matches(e))},j.findWhere=function(t,e){return j.find(t,j.matches(e))},j.max=function(t,e,n){if(!e&&j.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return T(t,function(t,o,u){var s=e?e.call(n,t,o,u):t;s>i&&(r=t,i=s)}),r},j.min=function(t,e,n){if(!e&&j.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,i=1/0;return T(t,function(t,o,u){var s=e?e.call(n,t,o,u):t;i>s&&(r=t,i=s)}),r},j.shuffle=function(t){var e,n=0,r=[];return T(t,function(t){e=j.random(n++),r[n-1]=r[e],r[e]=t}),r},j.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=j.values(t)),t[j.random(t.length-1)]):j.shuffle(t).slice(0,Math.max(0,e))};var C=function(t){return null==t?j.identity:j.isFunction(t)?t:j.property(t)};j.sortBy=function(t,e,n){return e=C(e),j.pluck(j.map(t,function(t,r,i){return{value:t,index:r,criteria:e.call(n,t,r,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var S=function(t){return function(e,n,r){var i={};return n=C(n),T(e,function(o,u){var s=n.call(r,o,u,e);t(i,s,o)}),i}};j.groupBy=S(function(t,e,n){j.has(t,e)?t[e].push(n):t[e]=[n]}),j.indexBy=S(function(t,e,n){t[e]=n}),j.countBy=S(function(t,e){j.has(t,e)?t[e]++:t[e]=1}),j.sortedIndex=function(t,e,n,r){n=C(n);for(var i=n.call(r,e),o=0,u=t.length;u>o;){var s=o+u>>>1;n.call(r,t[s])<i?o=s+1:u=s}return o},j.toArray=function(t){return t?j.isArray(t)?c.call(t):t.length===+t.length?j.map(t,j.identity):j.values(t):[]},j.size=function(t){return null==t?0:t.length===+t.length?t.length:j.keys(t).length},j.first=j.head=j.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:c.call(t,0,e)},j.initial=function(t,e,n){return c.call(t,0,t.length-(null==e||n?1:e))},j.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},j.rest=j.tail=j.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},j.compact=function(t){return j.filter(t,j.identity)};var B=function(t,e,n){return e&&j.every(t,j.isArray)?f.apply(n,t):(T(t,function(t){j.isArray(t)||j.isArguments(t)?e?l.apply(n,t):B(t,e,n):n.push(t)}),n)};j.flatten=function(t,e){return B(t,e,[])},j.without=function(t){return j.difference(t,c.call(arguments,1))},j.partition=function(t,e){var n=[],r=[];return T(t,function(t){(e(t)?n:r).push(t)}),[n,r]},j.uniq=j.unique=function(t,e,n,r){j.isFunction(e)&&(r=n,n=e,e=!1);var i=n?j.map(t,n,r):t,o=[],u=[];return T(i,function(n,r){(e?r&&u[u.length-1]===n:j.contains(u,n))||(u.push(n),o.push(t[r]))}),o},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(t){var e=c.call(arguments,1);return j.filter(j.uniq(t),function(t){return j.every(e,function(e){return j.contains(e,t)})})},j.difference=function(t){var e=f.apply(u,c.call(arguments,1));return j.filter(t,function(t){return!j.contains(e,t)})},j.zip=function(){for(var t=j.max(j.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=j.pluck(arguments,""+n);return e},j.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},j.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=j.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(w&&t.indexOf===w)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},j.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(x&&t.lastIndexOf===x)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},j.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o};var N=function(){};j.bind=function(t,e){var n,r;if(k&&t.bind===k)return k.apply(t,c.call(arguments,1));if(!j.isFunction(t))throw new TypeError;return n=c.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(c.call(arguments)));N.prototype=t.prototype;var i=new N;N.prototype=null;var o=t.apply(i,n.concat(c.call(arguments)));return Object(o)===o?o:i}},j.partial=function(t){var e=c.call(arguments,1);return function(){for(var n=0,r=e.slice(),i=0,o=r.length;o>i;i++)r[i]===j&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return t.apply(this,r)}},j.bindAll=function(t){var e=c.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return T(e,function(e){t[e]=j.bind(t[e],t)}),t},j.memoize=function(t,e){var n={};return e||(e=j.identity),function(){var r=e.apply(this,arguments);return j.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},j.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},j.defer=function(t){return j.delay.apply(j,[t,1].concat(c.call(arguments,1)))},j.throttle=function(t,e,n){var r,i,o,u=null,s=0;n||(n={});var a=function(){s=n.leading===!1?0:j.now(),u=null,o=t.apply(r,i),r=i=null};return function(){var l=j.now();s||n.leading!==!1||(s=l);var c=e-(l-s);return r=this,i=arguments,0>=c?(clearTimeout(u),u=null,s=l,o=t.apply(r,i),r=i=null):u||n.trailing===!1||(u=setTimeout(a,c)),o}},j.debounce=function(t,e,n){var r,i,o,u,s,a=function(){var l=j.now()-u;e>l?r=setTimeout(a,e-l):(r=null,n||(s=t.apply(o,i),o=i=null))};return function(){o=this,i=arguments,u=j.now();var l=n&&!r;return r||(r=setTimeout(a,e)),l&&(s=t.apply(o,i),o=i=null),s}},j.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},j.wrap=function(t,e){return j.partial(e,t)},j.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},j.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},j.keys=function(t){if(!j.isObject(t))return[];if(A)return A(t);var e=[];for(var n in t)j.has(t,n)&&e.push(n);return e},j.values=function(t){for(var e=j.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},j.pairs=function(t){for(var e=j.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},j.invert=function(t){for(var e={},n=j.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},j.functions=j.methods=function(t){var e=[];for(var n in t)j.isFunction(t[n])&&e.push(n);return e.sort()},j.extend=function(t){return T(c.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},j.pick=function(t){var e={},n=f.apply(u,c.call(arguments,1));return T(n,function(n){n in t&&(e[n]=t[n])}),e},j.omit=function(t){var e={},n=f.apply(u,c.call(arguments,1));for(var r in t)j.contains(n,r)||(e[r]=t[r]);return e},j.defaults=function(t){return T(c.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},j.clone=function(t){return j.isObject(t)?j.isArray(t)?t.slice():j.extend({},t):t},j.tap=function(t,e){return e(t),t};var P=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof j&&(t=t._wrapped),e instanceof j&&(e=e._wrapped);var i=h.call(t);if(i!=h.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var u=t.constructor,s=e.constructor;if(u!==s&&!(j.isFunction(u)&&u instanceof u&&j.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),r.push(e);var a=0,l=!0;if("[object Array]"==i){if(a=t.length,l=a==e.length)for(;a--&&(l=P(t[a],e[a],n,r)););}else{for(var c in t)if(j.has(t,c)&&(a++,!(l=j.has(e,c)&&P(t[c],e[c],n,r))))break;if(l){for(c in e)if(j.has(e,c)&&!a--)break;l=!a}}return n.pop(),r.pop(),l};j.isEqual=function(t,e){return P(t,e,[],[])},j.isEmpty=function(t){if(null==t)return!0;if(j.isArray(t)||j.isString(t))return 0===t.length;for(var e in t)if(j.has(t,e))return!1;return!0},j.isElement=function(t){return!(!t||1!==t.nodeType)},j.isArray=E||function(t){return"[object Array]"==h.call(t)},j.isObject=function(t){return t===Object(t)},T(["Arguments","Function","String","Number","Date","RegExp"],function(t){j["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),j.isArguments(arguments)||(j.isArguments=function(t){return!(!t||!j.has(t,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(t){return"function"==typeof t}),j.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},j.isNaN=function(t){return j.isNumber(t)&&t!=+t},j.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},j.isNull=function(t){return null===t},j.isUndefined=function(t){return void 0===t},j.has=function(t,e){return p.call(t,e)},j.noConflict=function(){return e._=i,this},j.identity=function(t){return t},j.constant=function(t){return function(){return t
}},j.property=function(t){return function(e){return e[t]}},j.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},j.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},j.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},j.now=Date.now||function(){return(new Date).getTime()};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};F.unescape=j.invert(F.escape);var M={escape:new RegExp("["+j.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(F.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(t){j[t]=function(e){return null==e?"":(""+e).replace(M[t],function(e){return F[t][e]})}}),j.result=function(t,e){if(null==t)return void 0;var n=t[e];return j.isFunction(n)?n.call(t):n},j.mixin=function(t){T(j.functions(t),function(e){var n=j[e]=t[e];j.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),z.call(this,n.apply(j,t))}})};var R=0;j.uniqueId=function(t){var e=++R+"";return t?t+e:e},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(t,e,n){var r;n=j.defaults({},n,j.templateSettings);var i=new RegExp([(n.escape||I).source,(n.interpolate||I).source,(n.evaluate||I).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(i,function(e,n,r,i,s){return u+=t.slice(o,s).replace(L,function(t){return"\\"+D[t]}),n&&(u+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(u+="';\n"+i+"\n__p+='"),o=s+e.length,e}),u+="';\n",n.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{r=new Function(n.variable||"obj","_",u)}catch(s){throw s.source=u,s}if(e)return r(e,j);var a=function(t){return r.call(this,t,j)};return a.source="function("+(n.variable||"obj")+"){\n"+u+"}",a},j.chain=function(t){return j(t).chain()};var z=function(t){return this._chain?j(t).chain():t};j.mixin(j),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];j.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],z.call(this,n)}}),T(["concat","join","slice"],function(t){var e=u[t];j.prototype[t]=function(){return z.call(this,e.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof t&&t.amd&&t("underscore",[],function(){return j})}).call(this)},{}]},{},[1])(1)});