!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.AmpersandView=t()}}(function(){var t;return function n(t,e,r){function i(u,a){if(!e[u]){if(!t[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}var l=e[u]={exports:{}};t[u][0].call(l.exports,function(n){var e=t[u][1][n];return i(e?e:n)},l,l.exports,n,t,e,r)}return e[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,n){function e(t){this.cid=u.uniqueId("view"),t||(t={}),u.extend(this,u.pick(t,c)),this.initialize.apply(this,arguments),this.autoRender&&this.template&&this.renderAndBind({model:this.model,collection:this.collection},this.template),this.el&&this.setElement(this.el)}var r=t("backbone-extend-standalone"),i=t("backbone-events-standalone"),o=t("domify"),u=t("underscore"),a=t("events-mixin"),s=t("component-classes"),l=/^(\S+)\s*(.*)$/,c=["model","collection","el","autoRender"];u.extend(e.prototype,i,{get:function(t){return t?"string"==typeof t?this.el.querySelector(t)||void 0:t:this.el},getAll:function(t){return""===t?[this.el]:Array.prototype.slice.call(this.el.querySelectorAll(t))},initialize:function(){},render:function(){return this},remove:function(){return this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),u.chain(this._subviews).flatten().invoke("remove"),this.stopListening(),this},setElement:function(t,n){return this.events&&this.events.unbind(),this.el=t,this.events=a(this.el,this),n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=u.result(this,"events")))return this;this.undelegateEvents();for(var n in t){var e=t[n],r=n.match(l),i=r[1],o=r[2];i+=".delegateEvents"+this.cid,""===o?this.events.bind(i,e):this.events.bind(i,o,e)}return this},undelegateEvents:function(){return this.events.unbind(),this},registerSubview:function(t){return this._subviews||(this._subviews=[]),this._subviews.push(t),t.el&&(t.parent=this),t},renderSubview:function(t,n){return"string"==typeof n&&(n=this.get(n)),this.registerSubview(t),t.render(),n.appendChild(t.el),t},registerBindings:function(t,n){function e(t,n){var e,r,o,a,s=i[t];"string"==typeof n?s.push([n,"text"]):(e=n[0],r=n[1],o=n[2],a=r.split(" "),a.length>1?u.each(a,function(t){s.push([e,t,o])}):s.push([e,r,o]))}var r=this,i={};if(t||(t=this.model),n||(n=this.bindings),!t)throw new Error("Cannot register bindings without a model");return n?(u.each(u.keys(n),function(t){i[t]=[]}),u.each(n,function(t,n){u.isArray(t)&&u.isArray(t[0])?u.each(t,function(t){e(n,t)}):e(n,t)}),u.each(i,function(n,e){u.each(n,function(n){var i=n[0],o=n[1],a=n[2],l=function(){u.each(r.getAll(i),function(n){var r,i,l=t.get(e),c=u.isBoolean(l);return!c&&u.isUndefined(l)&&(l=""),"text"===o?void(n.textContent=l):"class"===o?(i=s(n),void(c?i.toggle(e,l):(r=t.previous(e),r&&i.remove(r),i.add(l)))):("classList"===o&&(o="class"),void(c&&!l?n.removeAttribute(a):n.setAttribute(o,a||l)))})};r.listenToAndRun(t,"change:"+e,l)})}),this):this},renderAndBind:function(t,n){return this.renderWithTemplate(t,n),this.model&&this.registerBindings(),this},getByRole:function(t){return this.get('[role="'+t+'"]')||this.el.getAttribute("role")===t&&this.el||void 0},renderWithTemplate:function(t,n){var e=n||this.template;if(!e)throw new Error("Template string or function needed.");var r=o(u.isString(e)?e:e(t||{model:this.model})),i=this.el&&this.el.parentNode;if(i&&i.replaceChild(r,this.el),r[1])throw new Error("Views can only have one root element.");this.setElement(r,!this.renderedByParentView)},cacheElements:function(t){for(var n in t)this[n]=this.get(t[n])},listenToAndRun:function(t,n,e){var r=u.bind(e,this);this.listenTo(t,n,r),r()},animateRemove:function(){this.remove()},renderCollection:function(t,n,e,r){function i(t){return u.find(l,function(n){return t===n.model})}function o(t,r){var o,a=c.filter?c.filter(t):!0;a&&(o=i(t),o||(o=new n(u({model:t,collection:r}).extend(c.viewOptions)),l.push(o),o.parent=s,o.renderedByParentView=!0,o.render({containerEl:e})),o.insertSelf||(c.reverse?e.insertBefore(o.el,e.firstChild):e.appendChild(o.el)),o.delegateEvents())}function a(){e.innerHTML="",t.each(o)}var s=this,l=[],c=u.defaults(r||{},{filter:null,viewOptions:{},reverse:!1});e="string"==typeof e?this.get(e):e,this.registerSubview(l),this.listenTo(t,"add",o),this.listenTo(t,"remove",function(t){var n=l.indexOf(i(t));-1!==n&&l.splice(n,1)[0].animateRemove()}),this.listenTo(t,"move sort",a),this.listenTo(t,"refresh reset",function(){for(;l.length;)l.pop().remove();a()}),a()}}),e.extend=r,n.exports=e},{"backbone-events-standalone":3,"backbone-extend-standalone":4,"component-classes":5,domify:7,"events-mixin":8,underscore:13}],2:[function(n,e,r){!function(){function n(){return{keys:Object.keys,uniqueId:function(t){var n=++c+"";return t?t+n:n},has:function(t,n){return s.call(t,n)},each:function(t,n,e){if(null!=t)if(a&&t.forEach===a)t.forEach(n,e);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(n.call(e,t[r],r,t)===u)return}else for(var o in t)if(this.has(t,o)&&n.call(e,t[o],o,t)===u)return},once:function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}}}var i,o=this,u={},a=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,l=Array.prototype.slice,c=0,f=n();i={on:function(t,n,e){if(!p(this,"on",t,[n,e])||!n)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:n,context:e,ctx:e||this}),this},once:function(t,n,e){if(!p(this,"once",t,[n,e])||!n)return this;var r=this,i=f.once(function(){r.off(t,i),n.apply(this,arguments)});return i._callback=n,this.on(t,i,e)},off:function(t,n,e){var r,i,o,u,a,s,l,c;if(!this._events||!p(this,"off",t,[n,e]))return this;if(!t&&!n&&!e)return this._events={},this;for(u=t?[t]:f.keys(this._events),a=0,s=u.length;s>a;a++)if(t=u[a],o=this._events[t]){if(this._events[t]=r=[],n||e)for(l=0,c=o.length;c>l;l++)i=o[l],(n&&n!==i.callback&&n!==i.callback._callback||e&&e!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var n=l.call(arguments,1);if(!p(this,"trigger",t,n))return this;var e=this._events[t],r=this._events.all;return e&&d(e,n),r&&d(r,arguments),this},stopListening:function(t,n,e){var r=this._listeners;if(!r)return this;var i=!n&&!e;"object"==typeof n&&(e=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(n,e,this),i&&delete this._listeners[o];return this}};var h=/\s+/,p=function(t,n,e,r){if(!e)return!0;if("object"==typeof e){for(var i in e)t[n].apply(t,[i,e[i]].concat(r));return!1}if(h.test(e)){for(var o=e.split(h),u=0,a=o.length;a>u;u++)t[n].apply(t,[o[u]].concat(r));return!1}return!0},d=function(t,n){var e,r=-1,i=t.length,o=n[0],u=n[1],a=n[2];switch(n.length){case 0:for(;++r<i;)(e=t[r]).callback.call(e.ctx);return;case 1:for(;++r<i;)(e=t[r]).callback.call(e.ctx,o);return;case 2:for(;++r<i;)(e=t[r]).callback.call(e.ctx,o,u);return;case 3:for(;++r<i;)(e=t[r]).callback.call(e.ctx,o,u,a);return;default:for(;++r<i;)(e=t[r]).callback.apply(e.ctx,n)}},v={listenTo:"on",listenToOnce:"once"};f.each(v,function(t,n){i[n]=function(n,e,r){var i=this._listeners||(this._listeners={}),o=n._listenerId||(n._listenerId=f.uniqueId("l"));return i[o]=n,"object"==typeof e&&(r=this),n[t](e,r,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var n=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return f.each(n,function(n){t[n]=this[n]},this),t},"function"==typeof t?t(function(){return i}):"undefined"!=typeof r?("undefined"!=typeof e&&e.exports&&(r=e.exports=i),r.BackboneEvents=i):o.BackboneEvents=i}(this)},{}],3:[function(t,n){n.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":2}],4:[function(n,e,r){!function(n){"object"==typeof r?e.exports=n():"function"==typeof t&&t.amd?t(n):window.BackboneExtend=n()}(function(){"use strict";var t={has:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},extend:function(t){for(var n=1;n<arguments.length;++n){var e=arguments[n];if(e)for(var r in e)t[r]=e[r]}return t}},n=function(n,e){var r,i=this;r=n&&t.has(n,"constructor")?n.constructor:function(){return i.apply(this,arguments)},t.extend(r,i,e);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,n&&t.extend(r.prototype,n),r.__super__=i.prototype,r};return n})},{}],5:[function(t,n){function e(t){if(!t)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}var r=t("indexof"),i=/\s+/,o=Object.prototype.toString;n.exports=function(t){return new e(t)},e.prototype.add=function(t){if(this.list)return this.list.add(t),this;var n=this.array(),e=r(n,t);return~e||n.push(t),this.el.className=n.join(" "),this},e.prototype.remove=function(t){if("[object RegExp]"==o.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var n=this.array(),e=r(n,t);return~e&&n.splice(e,1),this.el.className=n.join(" "),this},e.prototype.removeMatching=function(t){for(var n=this.array(),e=0;e<n.length;e++)t.test(n[e])&&this.remove(n[e]);return this},e.prototype.toggle=function(t,n){return this.list?("undefined"!=typeof n?n!==this.list.toggle(t,n)&&this.list.toggle(t):this.list.toggle(t),this):("undefined"!=typeof n?n?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},e.prototype.array=function(){var t=this.el.className.replace(/^\s+|\s+$/g,""),n=t.split(i);return""===n[0]&&n.shift(),n},e.prototype.has=e.prototype.contains=function(t){return this.list?this.list.contains(t):!!~r(this.array(),t)}},{indexof:6}],6:[function(t,n){n.exports=function(t,n){if(t.indexOf)return t.indexOf(n);for(var e=0;e<t.length;++e)if(t[e]===n)return e;return-1}},{}],7:[function(t,n){function e(t){if("string"!=typeof t)throw new TypeError("String expected");var n=/<([\w:]+)/.exec(t);if(!n)return document.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var e=n[1];if("body"==e){var i=document.createElement("html");return i.innerHTML=t,i.removeChild(i.lastChild)}var o=r[e]||r._default,u=o[0],a=o[1],s=o[2],i=document.createElement("div");for(i.innerHTML=a+t+s;u--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var l=document.createDocumentFragment();i.firstChild;)l.appendChild(i.removeChild(i.firstChild));return l}n.exports=e;var r={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};r.td=r.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],r.option=r.optgroup=[1,'<select multiple="multiple">',"</select>"],r.thead=r.tbody=r.colgroup=r.caption=r.tfoot=[1,"<table>","</table>"],r.text=r.circle=r.ellipse=r.line=r.path=r.polygon=r.polyline=r.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],8:[function(t,n){function e(t,n){if(!(this instanceof e))return new e(t,n);if(!t)throw new Error("element required");if(!n)throw new Error("object required");this.el=t,this.obj=n,this._events={}}function r(t){var n=t.split(/ +/);return{name:n.shift(),selector:n.join(" ")}}var i=t("component-event"),o=t("delegate-events");n.exports=e,e.prototype.sub=function(t,n,e){this._events[t]=this._events[t]||{},this._events[t][n]=e},e.prototype.bind=function(t,n){function e(){var t=[].slice.call(arguments).concat(c);s[n].apply(s,t)}var u=r(t),a=this.el,s=this.obj,l=u.name,n=n||"on"+l,c=[].slice.call(arguments,2);return u.selector?e=o.bind(a,u.selector,l,e):i.bind(a,l,e),this.sub(l,n,e),e},e.prototype.unbind=function(t,n){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(t);var e=this._events[t];if(e){var r=e[n];r&&i.unbind(this.el,t,r)}},e.prototype.unbindAll=function(){for(var t in this._events)this.unbindAllOf(t)},e.prototype.unbindAllOf=function(t){var n=this._events[t];if(n)for(var e in n)this.unbind(t,e)}},{"component-event":9,"delegate-events":10}],9:[function(t,n,e){var r=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",o="addEventListener"!==r?"on":"";e.bind=function(t,n,e,i){return t[r](o+n,e,i||!1),e},e.unbind=function(t,n,e,r){return t[i](o+n,e,r||!1),e}},{}],10:[function(t,n,e){var r=t("closest"),i=t("event");e.bind=function(t,n,e,o,u){return i.bind(t,e,function(e){var i=e.target||e.srcElement;e.delegateTarget=r(i,n,!0,t),e.delegateTarget&&o.call(t,e)},u)},e.unbind=function(t,n,e,r){i.unbind(t,n,e,r)}},{closest:11,event:9}],11:[function(t,n){var e=t("matches-selector");n.exports=function(t,n,r){for(var i=r?t:t.parentNode;i&&i!==document;){if(e(i,n))return i;i=i.parentNode}}},{"matches-selector":12}],12:[function(t,n){function e(t,n){if(i)return i.call(t,n);for(var e=t.parentNode.querySelectorAll(n),r=0;r<e.length;++r)if(e[r]==t)return!0;return!1}var r=Element.prototype,i=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;n.exports=e},{}],13:[function(n,e,r){(function(){var n=this,i=n._,o={},u=Array.prototype,a=Object.prototype,s=Function.prototype,l=u.push,c=u.slice,f=u.concat,h=a.toString,p=a.hasOwnProperty,d=u.forEach,v=u.map,g=u.reduce,m=u.reduceRight,y=u.filter,b=u.every,w=u.some,x=u.indexOf,_=u.lastIndexOf,E=Array.isArray,A=Object.keys,j=s.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof r?("undefined"!=typeof e&&e.exports&&(r=e.exports=k),r._=k):n._=k,k.VERSION="1.6.0";var O=k.each=k.forEach=function(t,n,e){if(null==t)return t;if(d&&t.forEach===d)t.forEach(n,e);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(n.call(e,t[r],r,t)===o)return}else for(var u=k.keys(t),r=0,i=u.length;i>r;r++)if(n.call(e,t[u[r]],u[r],t)===o)return;return t};k.map=k.collect=function(t,n,e){var r=[];return null==t?r:v&&t.map===v?t.map(n,e):(O(t,function(t,i,o){r.push(n.call(e,t,i,o))}),r)};var T="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return r&&(n=k.bind(n,r)),i?t.reduce(n,e):t.reduce(n);if(O(t,function(t,o,u){i?e=n.call(r,e,t,o,u):(e=t,i=!0)}),!i)throw new TypeError(T);return e},k.reduceRight=k.foldr=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return r&&(n=k.bind(n,r)),i?t.reduceRight(n,e):t.reduceRight(n);var o=t.length;if(o!==+o){var u=k.keys(t);o=u.length}if(O(t,function(a,s,l){s=u?u[--o]:--o,i?e=n.call(r,e,t[s],s,l):(e=t[s],i=!0)}),!i)throw new TypeError(T);return e},k.find=k.detect=function(t,n,e){var r;return S(t,function(t,i,o){return n.call(e,t,i,o)?(r=t,!0):void 0}),r},k.filter=k.select=function(t,n,e){var r=[];return null==t?r:y&&t.filter===y?t.filter(n,e):(O(t,function(t,i,o){n.call(e,t,i,o)&&r.push(t)}),r)},k.reject=function(t,n,e){return k.filter(t,function(t,r,i){return!n.call(e,t,r,i)},e)},k.every=k.all=function(t,n,e){n||(n=k.identity);var r=!0;return null==t?r:b&&t.every===b?t.every(n,e):(O(t,function(t,i,u){return(r=r&&n.call(e,t,i,u))?void 0:o}),!!r)};var S=k.some=k.any=function(t,n,e){n||(n=k.identity);var r=!1;return null==t?r:w&&t.some===w?t.some(n,e):(O(t,function(t,i,u){return r||(r=n.call(e,t,i,u))?o:void 0}),!!r)};k.contains=k.include=function(t,n){return null==t?!1:x&&t.indexOf===x?-1!=t.indexOf(n):S(t,function(t){return t===n})},k.invoke=function(t,n){var e=c.call(arguments,2),r=k.isFunction(n);return k.map(t,function(t){return(r?n:t[n]).apply(t,e)})},k.pluck=function(t,n){return k.map(t,k.property(n))},k.where=function(t,n){return k.filter(t,k.matches(n))},k.findWhere=function(t,n){return k.find(t,k.matches(n))},k.max=function(t,n,e){if(!n&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return O(t,function(t,o,u){var a=n?n.call(e,t,o,u):t;a>i&&(r=t,i=a)}),r},k.min=function(t,n,e){if(!n&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,i=1/0;return O(t,function(t,o,u){var a=n?n.call(e,t,o,u):t;i>a&&(r=t,i=a)}),r},k.shuffle=function(t){var n,e=0,r=[];return O(t,function(t){n=k.random(e++),r[e-1]=r[n],r[n]=t}),r},k.sample=function(t,n,e){return null==n||e?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,n))};var C=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,n,e){return n=C(n),k.pluck(k.map(t,function(t,r,i){return{value:t,index:r,criteria:n.call(e,t,r,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return t.index-n.index}),"value")};var M=function(t){return function(n,e,r){var i={};return e=C(e),O(n,function(o,u){var a=e.call(r,o,u,n);t(i,a,o)}),i}};k.groupBy=M(function(t,n,e){k.has(t,n)?t[n].push(e):t[n]=[e]}),k.indexBy=M(function(t,n,e){t[n]=e}),k.countBy=M(function(t,n){k.has(t,n)?t[n]++:t[n]=1}),k.sortedIndex=function(t,n,e,r){e=C(e);for(var i=e.call(r,n),o=0,u=t.length;u>o;){var a=o+u>>>1;e.call(r,t[a])<i?o=a+1:u=a}return o},k.toArray=function(t){return t?k.isArray(t)?c.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:0>n?[]:c.call(t,0,n)},k.initial=function(t,n,e){return c.call(t,0,t.length-(null==n||e?1:n))},k.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:c.call(t,Math.max(t.length-n,0))},k.rest=k.tail=k.drop=function(t,n,e){return c.call(t,null==n||e?1:n)},k.compact=function(t){return k.filter(t,k.identity)};var q=function(t,n,e){return n&&k.every(t,k.isArray)?f.apply(e,t):(O(t,function(t){k.isArray(t)||k.isArguments(t)?n?l.apply(e,t):q(t,n,e):e.push(t)}),e)};k.flatten=function(t,n){return q(t,n,[])},k.without=function(t){return k.difference(t,c.call(arguments,1))},k.partition=function(t,n){var e=[],r=[];return O(t,function(t){(n(t)?e:r).push(t)}),[e,r]},k.uniq=k.unique=function(t,n,e,r){k.isFunction(n)&&(r=e,e=n,n=!1);var i=e?k.map(t,e,r):t,o=[],u=[];return O(i,function(e,r){(n?r&&u[u.length-1]===e:k.contains(u,e))||(u.push(e),o.push(t[r]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var n=c.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(n,function(n){return k.contains(n,t)})})},k.difference=function(t){var n=f.apply(u,c.call(arguments,1));return k.filter(t,function(t){return!k.contains(n,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),n=new Array(t),e=0;t>e;e++)n[e]=k.pluck(arguments,""+e);return n},k.object=function(t,n){if(null==t)return{};for(var e={},r=0,i=t.length;i>r;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},k.indexOf=function(t,n,e){if(null==t)return-1;var r=0,i=t.length;if(e){if("number"!=typeof e)return r=k.sortedIndex(t,n),t[r]===n?r:-1;r=0>e?Math.max(0,i+e):e}if(x&&t.indexOf===x)return t.indexOf(n,e);for(;i>r;r++)if(t[r]===n)return r;return-1},k.lastIndexOf=function(t,n,e){if(null==t)return-1;var r=null!=e;if(_&&t.lastIndexOf===_)return r?t.lastIndexOf(n,e):t.lastIndexOf(n);for(var i=r?e:t.length;i--;)if(t[i]===n)return i;return-1},k.range=function(t,n,e){arguments.length<=1&&(n=t||0,t=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((n-t)/e),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=e;return o};var R=function(){};k.bind=function(t,n){var e,r;if(j&&t.bind===j)return j.apply(t,c.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return e=c.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(n,e.concat(c.call(arguments)));R.prototype=t.prototype;var i=new R;R.prototype=null;var o=t.apply(i,e.concat(c.call(arguments)));return Object(o)===o?o:i}},k.partial=function(t){var n=c.call(arguments,1);return function(){for(var e=0,r=n.slice(),i=0,o=r.length;o>i;i++)r[i]===k&&(r[i]=arguments[e++]);for(;e<arguments.length;)r.push(arguments[e++]);return t.apply(this,r)}},k.bindAll=function(t){var n=c.call(arguments,1);if(0===n.length)throw new Error("bindAll must be passed function names");return O(n,function(n){t[n]=k.bind(t[n],t)}),t},k.memoize=function(t,n){var e={};return n||(n=k.identity),function(){var r=n.apply(this,arguments);return k.has(e,r)?e[r]:e[r]=t.apply(this,arguments)}},k.delay=function(t,n){var e=c.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(c.call(arguments,1)))},k.throttle=function(t,n,e){var r,i,o,u=null,a=0;e||(e={});var s=function(){a=e.leading===!1?0:k.now(),u=null,o=t.apply(r,i),r=i=null};return function(){var l=k.now();a||e.leading!==!1||(a=l);var c=n-(l-a);return r=this,i=arguments,0>=c?(clearTimeout(u),u=null,a=l,o=t.apply(r,i),r=i=null):u||e.trailing===!1||(u=setTimeout(s,c)),o}},k.debounce=function(t,n,e){var r,i,o,u,a,s=function(){var l=k.now()-u;n>l?r=setTimeout(s,n-l):(r=null,e||(a=t.apply(o,i),o=i=null))};return function(){o=this,i=arguments,u=k.now();var l=e&&!r;return r||(r=setTimeout(s,n)),l&&(a=t.apply(o,i),o=i=null),a}},k.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},k.wrap=function(t,n){return k.partial(n,t)},k.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},k.after=function(t,n){return function(){return--t<1?n.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(A)return A(t);var n=[];for(var e in t)k.has(t,e)&&n.push(e);return n},k.values=function(t){for(var n=k.keys(t),e=n.length,r=new Array(e),i=0;e>i;i++)r[i]=t[n[i]];return r},k.pairs=function(t){for(var n=k.keys(t),e=n.length,r=new Array(e),i=0;e>i;i++)r[i]=[n[i],t[n[i]]];return r},k.invert=function(t){for(var n={},e=k.keys(t),r=0,i=e.length;i>r;r++)n[t[e[r]]]=e[r];return n},k.functions=k.methods=function(t){var n=[];for(var e in t)k.isFunction(t[e])&&n.push(e);return n.sort()},k.extend=function(t){return O(c.call(arguments,1),function(n){if(n)for(var e in n)t[e]=n[e]}),t},k.pick=function(t){var n={},e=f.apply(u,c.call(arguments,1));return O(e,function(e){e in t&&(n[e]=t[e])}),n},k.omit=function(t){var n={},e=f.apply(u,c.call(arguments,1));for(var r in t)k.contains(e,r)||(n[r]=t[r]);return n},k.defaults=function(t){return O(c.call(arguments,1),function(n){if(n)for(var e in n)void 0===t[e]&&(t[e]=n[e])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,n){return n(t),t};var B=function(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof k&&(t=t._wrapped),n instanceof k&&(n=n._wrapped);var i=h.call(t);if(i!=h.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var o=e.length;o--;)if(e[o]==t)return r[o]==n;var u=t.constructor,a=n.constructor;if(u!==a&&!(k.isFunction(u)&&u instanceof u&&k.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in n)return!1;e.push(t),r.push(n);var s=0,l=!0;if("[object Array]"==i){if(s=t.length,l=s==n.length)for(;s--&&(l=B(t[s],n[s],e,r)););}else{for(var c in t)if(k.has(t,c)&&(s++,!(l=k.has(n,c)&&B(t[c],n[c],e,r))))break;if(l){for(c in n)if(k.has(n,c)&&!s--)break;l=!s}}return e.pop(),r.pop(),l};k.isEqual=function(t,n){return B(t,n,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var n in t)if(k.has(t,n))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=E||function(t){return"[object Array]"==h.call(t)},k.isObject=function(t){return t===Object(t)},O(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(n){return h.call(n)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,n){return p.call(t,n)},k.noConflict=function(){return n._=i,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(n){return n[t]}},k.matches=function(t){return function(n){if(n===t)return!0;for(var e in t)if(t[e]!==n[e])return!1;return!0}},k.times=function(t,n,e){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=n.call(e,i);return r},k.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=k.invert(N.escape);var F={escape:new RegExp("["+k.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(N.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(n){return null==n?"":(""+n).replace(F[t],function(n){return N[t][n]})}}),k.result=function(t,n){if(null==t)return void 0;var e=t[n];return k.isFunction(e)?e.call(t):e},k.mixin=function(t){O(k.functions(t),function(n){var e=k[n]=t[n];k.prototype[n]=function(){var t=[this._wrapped];return l.apply(t,arguments),P.call(this,e.apply(k,t))}})};var I=0;k.uniqueId=function(t){var n=++I+"";return t?t+n:n},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,n,e){var r;e=k.defaults({},e,k.templateSettings);var i=new RegExp([(e.escape||L).source,(e.interpolate||L).source,(e.evaluate||L).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(i,function(n,e,r,i,a){return u+=t.slice(o,a).replace(D,function(t){return"\\"+z[t]}),e&&(u+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(u+="';\n"+i+"\n__p+='"),o=a+n.length,n}),u+="';\n",e.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{r=new Function(e.variable||"obj","_",u)}catch(a){throw a.source=u,a}if(n)return r(n,k);var s=function(t){return r.call(this,t,k)};return s.source="function("+(e.variable||"obj")+"){\n"+u+"}",s},k.chain=function(t){return k(t).chain()};var P=function(t){return this._chain?k(t).chain():t};k.mixin(k),O(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=u[t];k.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],P.call(this,e)}}),O(["concat","join","slice"],function(t){var n=u[t];k.prototype[t]=function(){return P.call(this,n.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof t&&t.amd&&t("underscore",[],function(){return k})}).call(this)},{}]},{},[1])(1)});